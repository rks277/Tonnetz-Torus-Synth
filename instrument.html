<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Reaction Diffusion + Tonnetz (Expanded Instruments & Harmony Mode)</title>
  <style>
    body { margin: 0; overflow: hidden; background: black; }
    #ui {
      position: fixed;
      bottom: 10px;
      left: 10px;
      background: rgba(255,255,255,0.9);
      padding: 10px;
      border-radius: 5px;
      font-family: sans-serif;
      z-index: 20;
    }
    #ui input { margin: 2px; }
    #instrumentOptions {
      position: fixed;
      top: 10px;
      right: 10px;
      background: rgba(255,255,255,0.9);
      padding: 10px;
      border-radius: 5px;
      font-family: sans-serif;
      z-index: 20;
    }
    #instrumentOptions .controlGroup { margin-bottom: 5px; }
    #instrumentOptions label { margin-right: 5px; }
    #overlay {
      position: fixed;
      top: 100px;
      right: 10px;
      width: 400px;
      height: 400px;
      border: 1px solid white;
      z-index: 10;
      cursor: crosshair;
      image-rendering: pixelated;
    }
    #noteDisplay {
      position: fixed;
      bottom: 10px;
      right: 10px;
      background: rgba(0,0,0,0.8);
      color: white;
      padding: 8px;
      font-family: sans-serif;
      font-size: 14px;
      border-radius: 5px;
      z-index: 30;
    }
    #noteDisplay canvas {
      display: block;
      margin-bottom: 5px;
      border: 1px solid white;
      background: #222;
    }
  </style>
  <script src="https://cdn.jsdelivr.net/npm/three@0.153.0/build/three.min.js"></script>
</head>
<body>
  <div id="ui">
    DU: <input id="DU" value="0.16" step="0.01" type="number"><br>
    DV: <input id="DV" value="0.08" step="0.01" type="number"><br>
    F:  <input id="F" value="0.06" step="0.001" type="number"><br>
    K:  <input id="K" value="0.062" step="0.001" type="number"><br>
    Base Color: <input id="baseColor" type="color" value="#000000"><br>
    Highlight Color: <input id="highlightColor" type="color" value="#ffffff"><br>
    <button id="resetBtn">Reset</button><br>
    <p><b>Click and drag to draw</b></p>
  </div>

  <div id="instrumentOptions">
    <div class="controlGroup">
      <label for="instrumentSelect">Instrument:</label>
      <select id="instrumentSelect">
        <option value="basic-sine">Basic (Sine)</option>
        <option value="basic-square">Basic (Square)</option>
        <option value="basic-triangle">Basic (Triangle)</option>
        <option value="basic-sawtooth">Basic (Sawtooth)</option>
        <option value="fm">FM Synth</option>
        <option value="bell">Bell</option>
        <option value="organ">Organ</option>
      </select>
    </div>
    <div class="controlGroup">
      <label for="modeSlider">Mode (0=Single, 1=Harmony):</label>
      <input id="modeSlider" type="range" min="0" max="1" step="1" value="0">
    </div>
  </div>

  <canvas id="overlay" width="400" height="400"></canvas>

  <div id="noteDisplay">
    <canvas id="interpCanvas" width="100" height="100"></canvas>
    <div id="noteInfo">No note</div>
  </div>
  <script src="main.js"></script>
</body>
</html>
